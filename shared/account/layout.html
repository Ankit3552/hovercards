<div class="{{ _.prefix('account-container') }}">
	{{#if accounts}}
		{{#if expanded && accounts.length > 1}}
			<div class="{{ prefix('flex-spread') }} {{ prefix('account-switcher') }}">
				<div>
					<span>{{ accounts[0].name || copy('account-id-as-name', accounts[0].api, accounts[0].id) || copy('account-empty', accounts[0].api) }}'s accounts:</span>
				</div>
				<div class="{{ prefix('tabs') }}">
					{{#each accounts:i}}
						<span on-click="set('account_i', i)"
						      class="{{ prefix('tabs__tab') }}
						             {{ i === account_i ? _.prefix('tabs__tab_selected') : '' }}">
							{{ copy(.api) }}
						</span>
					{{/each accounts:i}}
				</div>
			</div>
		{{/if}}
		{{#if accounts[account_i]}}
			<div class="{{ _.prefix('account') }} {{ _.prefix('account-' + accounts[account_i].api) }} {{ accounts[account_i].loading ? _.prefix('loading-parent') : '' }}">
				{{#if accounts[account_i].loading}}
					<div class="{{ _.prefix('loading') }}"></div>
				{{elseif accounts[account_i].loaded}}
					<catch-errors object="{{ accounts[account_i] }}">
						<a href="{{ url(accounts[account_i]) }}" target="_blank" class="no-hovercard">
							{{>accounts[account_i].api+'-account' { account: accounts[account_i] }}}
						</a>
					</catch-errors>
				{{/if}}
			</div>
		{{/if}}
		{{#if expanded && accounts[account_i].content}}
			<div class="{{ _.prefix('account-content') }}">
				{{#if accounts[account_i].content.loading}}
					<div class="{{ _.prefix('loading') }}"></div>
				{{elseif accounts[account_i].content.loaded}}
					<account-content-catch-errors object="{{ accounts[account_i].content }}">
						{{>accounts[account_i].content.api+'-account-content' { account: accounts[account_i] }}}
					</account-content-catch-errors>
				{{/if}}
			</div>
		{{/if}}
	{{/if}}
</div>
